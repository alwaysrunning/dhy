/**
 * Created by 沐沐 on 2015-10-23.
 */

var apis = require('../');
var chai = require('chai');
var chaiPromise = require('chai-as-promised');
chai.use(chaiPromise);
chai.should();

describe('Weixin', function () {
    before(function () {
        apis.config({
            weixin: {
                printLog: false
            }
        });
    });

    describe('#Userinfo', function () {
        it('should get userinfo', function () {
            return apis.weixin.access_token().then(function (accessToken) {
                return apis.weixin.user_info(accessToken.access_token, 'omFGqjnRJXSD8MKyzM9KIjWgsn2o');
            }).then(function (data) {
                //console.log(data);
                return data;
            }).fail(function (err) {
                //console.error(err);
                throw err;
            }).should.not.be.rejected;
        });
    });
});