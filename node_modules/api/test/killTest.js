/**
 * Created by 沐沐 on 2015-09-14.
 */

var apis = require('../');
var chai = require('chai');
var chaiPromise = require('chai-as-promised');
chai.use(chaiPromise);
chai.should();

describe('kill', function () {
    before(function () {
        apis.config({
            api: {
                printLog: false,
                host: '10.200.51.104',//API测试服务器地址
                port: 8080,//API测试服务器端口号
                path: '/bubugao-mobile-api/app',//测试服务器普通API请求地址
                authPath: '/bubugao-mobile-api/app/auth',//测试服务器验证API请求地址
                ver: '2.7'
            }
        });
    });

    describe('#times', function () {
        it('should get times array with length above 0', function () {
            return apis.kill.points(1).should.eventually.to.be.an('array').with.length.above(0);
        });
    });

    describe('#gift', function () {
        it('should not rejected', function () {
            return apis.kill.gift(null, '2015-09-30 00:00:00', 1, 20, null).should.not.be.rejected;
        });
        it('should get data below 20', function () {
            return apis.kill.gift(null, '2015-09-30 00:00:00', 1, 20, null).should.eventually.have.property('data').length.below(20);
        });
        it('should throw Error', function () {
            return apis.kill.gift(1, null, 1, 20, null).should.rejected;
        });
    });

    describe('#city', function () {
        it('should not rejected', function () {
            return apis.kill.city('cs').should.not.be.rejected;
        });
    });
});